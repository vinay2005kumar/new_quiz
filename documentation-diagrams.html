<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Quiz Management System - Documentation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        .diagram-section {
            margin: 40px 0;
            padding: 25px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }
        .diagram-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }
        .diagram-description {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        canvas {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 10px 0;
            display: block;
            margin-left: auto;
            margin-right: auto;
            background: white;
        }
        .download-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: transform 0.2s;
        }
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .btn-container {
            text-align: center;
            margin: 20px 0;
        }
        .download-all-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin: 20px;
            transition: transform 0.2s;
        }
        .download-all-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        .features-overview {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .feature-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        .feature-item h4 {
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        .feature-item ul {
            margin: 0;
            padding-left: 20px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéì College Quiz Management System</h1>
        <p class="subtitle">Comprehensive Documentation with Downloadable Diagrams</p>
        
        <div class="features-overview">
            <h2 style="text-align: center; margin-top: 0;">üöÄ System Features Overview</h2>
            <div class="features-grid">
                <div class="feature-item">
                    <h4>üîê Authentication & Security</h4>
                    <ul>
                        <li>JWT-based authentication</li>
                        <li>Role-based access control</li>
                        <li>Quiz security features</li>
                        <li>Admin override system</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>üìù Quiz Management</h4>
                    <ul>
                        <li>Multiple creation methods</li>
                        <li>Manual Entry/Excel/Word/Image upload</li>
                        <li>Negative marking support</li>
                        <li>Time-based scheduling</li>
                        <li>Security for Quiz</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>üë• User Management</h4>
                    <ul>
                        <li>Admin, Faculty, Student, Event roles</li>
                        <li>Bulk user operations</li>
                        <li>Faculty subject assignment</li>
                        <li>Profile management</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>üé™ Event System</h4>
                    <ul>
                        <li>Public quiz access</li>
                        <li>Team-based participation</li>
                        <li>Cross-college eligibility</li>
                        <li>Registration management</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>üìä Analytics & Reporting</h4>
                    <ul>
                        <li>Real-time dashboards</li>
                        <li>Performance metrics</li>
                        <li>Detailed submissions tracking</li>
                        <li>Export capabilities</li>
                    </ul>
                </div>
                <div class="feature-item">
                    <h4>üõ°Ô∏è Security Features</h4>
                    <ul>
                        <li>Fullscreen enforcement</li>
                        <li>Copy/paste prevention</li>
                        <li>Tab switching detection</li>
                        <li>Violation logging</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="btn-container">
            <button class="download-all-btn" onclick="downloadAllDiagrams()">
                üì• Download All Diagrams as ZIP
            </button>
        </div>

        <!-- System Architecture Diagram -->
        <div class="diagram-section">
            <div class="diagram-title">üèóÔ∏è System Architecture Overview</div>
            <div class="diagram-description">
                Complete system architecture showing the three-tier structure: Frontend (React.js), Backend (Node.js + Express), and Database (MongoDB) layers with security features.
            </div>
            <canvas id="architectureCanvas" width="1000" height="700"></canvas>
            <div class="btn-container">
                <button class="download-btn" onclick="downloadDiagram('architectureCanvas', 'System-Architecture')">
                    üì• Download Architecture Diagram
                </button>
            </div>
        </div>

        <!-- User Roles Diagram -->
        <div class="diagram-section">
            <div class="diagram-title">üë• User Roles & Permissions Matrix</div>
            <div class="diagram-description">
                Detailed breakdown of user roles (Admin, Faculty, Student, Event Manager) and their specific capabilities within the system.
            </div>
            <canvas id="rolesCanvas" width="1000" height="700"></canvas>
            <div class="btn-container">
                <button class="download-btn" onclick="downloadDiagram('rolesCanvas', 'User-Roles-Permissions')">
                    üì• Download Roles Diagram
                </button>
            </div>
        </div>

        <!-- Quiz Creation Workflow -->
        <div class="diagram-section">
            <div class="diagram-title">üîÑ Complete Quiz Creation Workflow</div>
            <div class="diagram-description">
                Step-by-step process of quiz creation from basic details entry through multiple input methods to final publication.
            </div>
            <canvas id="workflowCanvas" width="1000" height="800"></canvas>
            <div class="btn-container">
                <button class="download-btn" onclick="downloadDiagram('workflowCanvas', 'Quiz-Creation-Workflow')">
                    üì• Download Workflow Diagram
                </button>
            </div>
        </div>

        <!-- Student Quiz Process -->
        <div class="diagram-section">
            <div class="diagram-title">üéì Student Quiz Taking Process</div>
            <div class="diagram-description">
                Complete student journey from login to quiz completion, including security checks and violation handling.
            </div>
            <canvas id="studentCanvas" width="1000" height="800"></canvas>
            <div class="btn-container">
                <button class="download-btn" onclick="downloadDiagram('studentCanvas', 'Student-Quiz-Process')">
                    üì• Download Student Process Diagram
                </button>
            </div>
        </div>

        <!-- Security System -->
        <div class="diagram-section">
            <div class="diagram-title">üîí Advanced Security System</div>
            <div class="diagram-description">
                Comprehensive security architecture with admin override system, violation management, and monitoring features.
            </div>
            <canvas id="securityCanvas" width="1000" height="700"></canvas>
            <div class="btn-container">
                <button class="download-btn" onclick="downloadDiagram('securityCanvas', 'Security-System')">
                    üì• Download Security Diagram
                </button>
            </div>
        </div>

        <!-- Database Schema -->
        <div class="diagram-section">
            <div class="diagram-title">üìä Database Schema & Relationships</div>
            <div class="diagram-description">
                Complete database structure showing all collections, their relationships, and key fields for data integrity.
            </div>
            <canvas id="databaseCanvas" width="1000" height="700"></canvas>
            <div class="btn-container">
                <button class="download-btn" onclick="downloadDiagram('databaseCanvas', 'Database-Schema')">
                    üì• Download Database Diagram
                </button>
            </div>
        </div>
    </div>

    <script>
        // Utility function to draw arrow heads
        function drawArrowHead(ctx, x, y, angle) {
            const headlen = 10;
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(-headlen, -headlen/2);
            ctx.lineTo(-headlen, headlen/2);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        // Function to draw rounded rectangles
        function drawRoundedRect(ctx, x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
        }

        // Function to create architecture diagram
        function createArchitectureDiagram() {
            const canvas = document.getElementById('architectureCanvas');
            const ctx = canvas.getContext('2d');

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#f8f9ff');
            gradient.addColorStop(1, '#e8f0ff');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Frontend Layer
            ctx.fillStyle = '#4CAF50';
            drawRoundedRect(ctx, 50, 50, 900, 150, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Frontend Layer (React.js)', 500, 90);

            ctx.font = '16px Arial';
            ctx.fillText('Landing Page ‚Ä¢ Authentication ‚Ä¢ Role-Based Dashboard', 500, 120);
            ctx.fillText('Student Interface ‚Ä¢ Faculty Interface ‚Ä¢ Admin Interface ‚Ä¢ Event Interface', 500, 145);

            // Backend Layer
            ctx.fillStyle = '#2196F3';
            drawRoundedRect(ctx, 50, 250, 900, 150, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 24px Arial';
            ctx.fillText('Backend Layer (Node.js + Express)', 500, 290);

            ctx.font = '16px Arial';
            ctx.fillText('API Gateway ‚Ä¢ Authentication Middleware ‚Ä¢ Authorization Middleware', 500, 320);
            ctx.fillText('Quiz Routes ‚Ä¢ User Routes ‚Ä¢ Admin Routes ‚Ä¢ Event Routes', 500, 345);

            // Database Layer
            ctx.fillStyle = '#FF9800';
            drawRoundedRect(ctx, 50, 450, 900, 150, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 24px Arial';
            ctx.fillText('Database Layer (MongoDB)', 500, 490);

            ctx.font = '16px Arial';
            ctx.fillText('Users ‚Ä¢ Quizzes ‚Ä¢ Submissions ‚Ä¢ Subjects ‚Ä¢ Settings', 500, 520);
            ctx.fillText('Event Quizzes ‚Ä¢ Academic Details ‚Ä¢ Departments', 500, 545);

            // Security Features
            ctx.fillStyle = '#9C27B0';
            drawRoundedRect(ctx, 50, 620, 900, 60, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('Security & Features: JWT Auth ‚Ä¢ RBAC ‚Ä¢ Quiz Security ‚Ä¢ Admin Override ‚Ä¢ File Processing', 500, 655);

            // Arrows
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(500, 200);
            ctx.lineTo(500, 250);
            ctx.moveTo(500, 400);
            ctx.lineTo(500, 450);
            ctx.moveTo(500, 600);
            ctx.lineTo(500, 620);
            ctx.stroke();

            // Arrow heads
            ctx.fillStyle = '#333';
            drawArrowHead(ctx, 500, 250, Math.PI/2);
            drawArrowHead(ctx, 500, 450, Math.PI/2);
            drawArrowHead(ctx, 500, 620, Math.PI/2);
        }

        // Function to create user roles diagram
        function createUserRolesDiagram() {
            const canvas = document.getElementById('rolesCanvas');
            const ctx = canvas.getContext('2d');

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#fff5f5');
            gradient.addColorStop(1, '#f0f8ff');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Admin Role
            ctx.fillStyle = '#FF5722';
            drawRoundedRect(ctx, 50, 50, 200, 150, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ADMIN', 150, 85);
            ctx.font = '14px Arial';
            ctx.fillText('‚Ä¢ System Control', 150, 110);
            ctx.fillText('‚Ä¢ User Management', 150, 130);
            ctx.fillText('‚Ä¢ College Settings', 150, 150);
            ctx.fillText('‚Ä¢ Security Override', 150, 170);

            // Faculty Role
            ctx.fillStyle = '#3F51B5';
            drawRoundedRect(ctx, 300, 50, 200, 150, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('FACULTY', 400, 85);
            ctx.font = '14px Arial';
            ctx.fillText('‚Ä¢ Create Quizzes', 400, 110);
            ctx.fillText('‚Ä¢ Subject Assignment', 400, 130);
            ctx.fillText('‚Ä¢ Student Analysis', 400, 150);
            ctx.fillText('‚Ä¢ Grade Management', 400, 170);

            // Event Manager Role
            ctx.fillStyle = '#9C27B0';
            drawRoundedRect(ctx, 550, 50, 200, 150, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('EVENT MANAGER', 650, 85);
            ctx.font = '14px Arial';
            ctx.fillText('‚Ä¢ Public Quizzes', 650, 110);
            ctx.fillText('‚Ä¢ Team Management', 650, 130);
            ctx.fillText('‚Ä¢ Registration', 650, 150);
            ctx.fillText('‚Ä¢ Cross-College', 650, 170);

            // Student Role
            ctx.fillStyle = '#4CAF50';
            drawRoundedRect(ctx, 375, 250, 200, 150, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.fillText('STUDENT', 475, 285);
            ctx.font = '14px Arial';
            ctx.fillText('‚Ä¢ Take Quizzes', 475, 310);
            ctx.fillText('‚Ä¢ View Results', 475, 330);
            ctx.fillText('‚Ä¢ Quiz History', 475, 350);
            ctx.fillText('‚Ä¢ Profile Management', 475, 370);

            // Hierarchy arrows
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;

            // Admin to Faculty
            ctx.beginPath();
            ctx.moveTo(250, 125);
            ctx.lineTo(300, 125);
            ctx.stroke();
            ctx.fillStyle = '#333';
            drawArrowHead(ctx, 300, 125, 0);

            // Admin to Event Manager
            ctx.beginPath();
            ctx.moveTo(250, 100);
            ctx.lineTo(550, 100);
            ctx.stroke();
            drawArrowHead(ctx, 550, 100, 0);

            // Faculty to Student
            ctx.beginPath();
            ctx.moveTo(400, 200);
            ctx.lineTo(475, 250);
            ctx.stroke();
            drawArrowHead(ctx, 475, 250, Math.PI/4);

            // Capabilities sections
            ctx.fillStyle = '#E3F2FD';
            drawRoundedRect(ctx, 50, 450, 900, 200, 15);
            ctx.fill();

            ctx.fillStyle = '#333';
            ctx.font = 'bold 18px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('Key System Capabilities:', 70, 480);

            ctx.font = '14px Arial';
            const capabilities = [
                '‚úì Multi-format Quiz Creation (Manual, Excel, Word, Image OCR)',
                '‚úì Advanced Security Features (Fullscreen, Copy Prevention, Tab Monitoring)',
                '‚úì Faculty Subject Assignment with Bulk Operations',
                '‚úì Event Management for Cross-College Competitions',
                '‚úì Real-time Analytics and Performance Tracking',
                '‚úì Comprehensive User Management with Role-Based Access',
                '‚úì Automated Grading with Negative Marking Support',
                '‚úì Admin Override System for Emergency Access'
            ];

            capabilities.forEach((cap, index) => {
                const x = 70 + (index % 2) * 450;
                const y = 510 + Math.floor(index / 2) * 25;
                ctx.fillText(cap, x, y);
            });
        }

        // Function to create quiz workflow diagram
        function createQuizWorkflowDiagram() {
            const canvas = document.getElementById('workflowCanvas');
            const ctx = canvas.getContext('2d');

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#f0f8ff');
            gradient.addColorStop(1, '#fff0f8');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Step 1: Basic Details
            ctx.fillStyle = '#FF6B6B';
            drawRoundedRect(ctx, 50, 50, 200, 100, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Step 1: Basic Details', 150, 85);
            ctx.font = '12px Arial';
            ctx.fillText('Title, Duration, Timing', 150, 105);
            ctx.fillText('Department, Year, Section', 150, 120);

            // Step 2: Input Method
            ctx.fillStyle = '#4ECDC4';
            drawRoundedRect(ctx, 300, 50, 200, 100, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Step 2: Input Method', 400, 85);
            ctx.font = '12px Arial';
            ctx.fillText('Manual ‚Ä¢ Excel ‚Ä¢ Word', 400, 105);
            ctx.fillText('Image OCR', 400, 120);

            // Step 3: Configuration
            ctx.fillStyle = '#45B7D1';
            drawRoundedRect(ctx, 550, 50, 200, 100, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Step 3: Configuration', 650, 85);
            ctx.font = '12px Arial';
            ctx.fillText('Security Settings', 650, 105);
            ctx.fillText('Marking & Display', 650, 120);

            // Step 4: Validation
            ctx.fillStyle = '#96CEB4';
            drawRoundedRect(ctx, 750, 50, 200, 100, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Step 4: Validation', 850, 85);
            ctx.font = '12px Arial';
            ctx.fillText('Preview & Check', 850, 105);
            ctx.fillText('Final Save', 850, 120);

            // Input method details
            const methods = [
                { name: 'Manual Entry', x: 100, y: 200, color: '#FF9F43' },
                { name: 'Excel Upload', x: 300, y: 200, color: '#10AC84' },
                { name: 'Word Document', x: 500, y: 200, color: '#5F27CD' },
                { name: 'Image OCR', x: 700, y: 200, color: '#00D2D3' }
            ];

            methods.forEach(method => {
                ctx.fillStyle = method.color;
                drawRoundedRect(ctx, method.x, method.y, 150, 80, 8);
                ctx.fill();
                ctx.fillStyle = 'white';
                ctx.font = 'bold 14px Arial';
                ctx.fillText(method.name, method.x + 75, method.y + 35);
                ctx.font = '11px Arial';
                ctx.fillText('Question Input', method.x + 75, method.y + 55);
            });

            // Security features
            ctx.fillStyle = '#E74C3C';
            drawRoundedRect(ctx, 50, 320, 900, 120, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Security Features Configuration', 500, 350);

            const securityFeatures = [
                'Fullscreen Enforcement', 'Right-Click Blocking', 'Copy/Paste Prevention',
                'Tab Switch Detection', 'Proctoring Mode', 'Admin Override System'
            ];

            ctx.font = '14px Arial';
            securityFeatures.forEach((feature, index) => {
                const x = 100 + (index % 3) * 280;
                const y = 380 + Math.floor(index / 3) * 25;
                ctx.fillText('‚Ä¢ ' + feature, x, y);
            });

            // Workflow arrows
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;

            // Horizontal arrows
            for (let i = 0; i < 3; i++) {
                const startX = 250 + i * 250;
                ctx.beginPath();
                ctx.moveTo(startX, 100);
                ctx.lineTo(startX + 50, 100);
                ctx.stroke();
                ctx.fillStyle = '#333';
                drawArrowHead(ctx, startX + 50, 100, 0);
            }

            // Vertical arrows from step 2 to methods
            ctx.beginPath();
            ctx.moveTo(400, 150);
            ctx.lineTo(400, 200);
            ctx.stroke();
            drawArrowHead(ctx, 400, 200, Math.PI/2);

            // Success path
            ctx.fillStyle = '#27AE60';
            drawRoundedRect(ctx, 350, 500, 300, 80, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 18px Arial';
            ctx.fillText('Quiz Created Successfully!', 500, 530);
            ctx.font = '14px Arial';
            ctx.fillText('Ready for Student Access', 500, 555);

            // Final arrow
            ctx.strokeStyle = '#27AE60';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(500, 440);
            ctx.lineTo(500, 500);
            ctx.stroke();
            ctx.fillStyle = '#27AE60';
            drawArrowHead(ctx, 500, 500, Math.PI/2);
        }

        // Function to create student process diagram
        function createStudentProcessDiagram() {
            const canvas = document.getElementById('studentCanvas');
            const ctx = canvas.getContext('2d');

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#e8f5e8');
            gradient.addColorStop(1, '#f0f8ff');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Student login
            ctx.fillStyle = '#2ECC71';
            drawRoundedRect(ctx, 50, 50, 150, 60, 8);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Student Login', 125, 85);

            // Quiz selection
            ctx.fillStyle = '#3498DB';
            drawRoundedRect(ctx, 250, 50, 150, 60, 8);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.fillText('Select Quiz', 325, 85);

            // Security check
            ctx.fillStyle = '#E74C3C';
            drawRoundedRect(ctx, 450, 50, 150, 60, 8);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.fillText('Security Check', 525, 85);

            // Quiz taking
            ctx.fillStyle = '#9B59B6';
            drawRoundedRect(ctx, 650, 50, 150, 60, 8);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.fillText('Take Quiz', 725, 85);

            // Security monitoring box
            ctx.fillStyle = '#E67E22';
            drawRoundedRect(ctx, 50, 150, 900, 120, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 18px Arial';
            ctx.fillText('Active Security Monitoring', 500, 180);

            const securityItems = [
                'Fullscreen Exit Detection', 'Right-Click Blocking', 'Copy/Paste Prevention',
                'Tab Switch Detection', 'Window Focus Monitoring', 'Violation Logging'
            ];

            ctx.font = '14px Arial';
            securityItems.forEach((item, index) => {
                const x = 100 + (index % 3) * 280;
                const y = 210 + Math.floor(index / 3) * 25;
                ctx.fillText('‚Ä¢ ' + item, x, y);
            });

            // Violation handling
            ctx.fillStyle = '#C0392B';
            drawRoundedRect(ctx, 50, 300, 200, 100, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Violation Detected', 150, 330);
            ctx.font = '12px Arial';
            ctx.fillText('Warning ‚Üí Continue', 150, 350);
            ctx.fillText('or Terminate Quiz', 150, 365);

            // Normal completion
            ctx.fillStyle = '#27AE60';
            drawRoundedRect(ctx, 300, 300, 200, 100, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Quiz Completion', 400, 330);
            ctx.font = '12px Arial';
            ctx.fillText('Auto/Manual Submit', 400, 350);
            ctx.fillText('Score Calculation', 400, 365);

            // Results
            ctx.fillStyle = '#8E44AD';
            drawRoundedRect(ctx, 550, 300, 200, 100, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('Results Display', 650, 330);
            ctx.font = '12px Arial';
            ctx.fillText('Score & Feedback', 650, 350);
            ctx.fillText('Performance Analysis', 650, 365);

            // Process flow arrows
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;

            // Top flow
            for (let i = 0; i < 3; i++) {
                const startX = 200 + i * 200;
                ctx.beginPath();
                ctx.moveTo(startX, 80);
                ctx.lineTo(startX + 50, 80);
                ctx.stroke();
                ctx.fillStyle = '#333';
                drawArrowHead(ctx, startX + 50, 80, 0);
            }

            // Down to monitoring
            ctx.beginPath();
            ctx.moveTo(525, 110);
            ctx.lineTo(525, 150);
            ctx.stroke();
            drawArrowHead(ctx, 525, 150, Math.PI/2);

            // To completion paths
            ctx.beginPath();
            ctx.moveTo(400, 270);
            ctx.lineTo(400, 300);
            ctx.stroke();
            drawArrowHead(ctx, 400, 300, Math.PI/2);

            // To results
            ctx.beginPath();
            ctx.moveTo(500, 350);
            ctx.lineTo(550, 350);
            ctx.stroke();
            drawArrowHead(ctx, 550, 350, 0);

            // Time and attempts info
            ctx.fillStyle = '#34495E';
            drawRoundedRect(ctx, 50, 450, 900, 80, 10);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Quiz Session Management', 500, 480);
            ctx.font = '14px Arial';
            ctx.fillText('Timer Control ‚Ä¢ Auto-Save Progress ‚Ä¢ Session Recovery ‚Ä¢ Attempt Tracking', 500, 505);
        }

        // Function to create security system diagram
        function createSecuritySystemDiagram() {
            const canvas = document.getElementById('securityCanvas');
            const ctx = canvas.getContext('2d');

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#ffe8e8');
            gradient.addColorStop(1, '#fff0f0');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Security layers
            const layers = [
                { name: 'Authentication Layer', color: '#E74C3C', y: 50 },
                { name: 'Authorization Layer', color: '#8E44AD', y: 120 },
                { name: 'Quiz Security Layer', color: '#2980B9', y: 190 },
                { name: 'Monitoring Layer', color: '#27AE60', y: 260 }
            ];

            layers.forEach(layer => {
                ctx.fillStyle = layer.color;
                drawRoundedRect(ctx, 50, layer.y, 200, 50, 8);
                ctx.fill();
                ctx.fillStyle = 'white';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(layer.name, 150, layer.y + 30);
            });

            // Security features
            ctx.fillStyle = '#34495E';
            drawRoundedRect(ctx, 300, 50, 300, 260, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 18px Arial';
            ctx.fillText('Security Features', 450, 80);

            const features = [
                'Fullscreen Enforcement',
                'Right-Click Blocking',
                'Copy/Paste Prevention',
                'Tab Switch Detection',
                'Keyboard Shortcut Blocking',
                'Window Focus Monitoring',
                'Proctoring Mode',
                'Session Management'
            ];

            ctx.font = '14px Arial';
            features.forEach((feature, index) => {
                ctx.fillText('‚Ä¢ ' + feature, 320, 110 + index * 25);
            });

            // Admin override system
            ctx.fillStyle = '#D35400';
            drawRoundedRect(ctx, 650, 50, 300, 160, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 18px Arial';
            ctx.fillText('Admin Override System', 800, 80);

            const overrideFeatures = [
                'Configurable Key Combination',
                'Password Protection',
                'Session Timeout',
                'Activity Logging',
                'Emergency Access Control'
            ];

            ctx.font = '14px Arial';
            overrideFeatures.forEach((feature, index) => {
                ctx.fillText('‚Ä¢ ' + feature, 670, 110 + index * 25);
            });

            // Violation management
            ctx.fillStyle = '#C0392B';
            drawRoundedRect(ctx, 650, 230, 300, 160, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 18px Arial';
            ctx.fillText('Violation Management', 800, 260);

            const violationFeatures = [
                'Real-time Detection',
                'Progressive Warnings',
                'Auto-Termination',
                'Comprehensive Logging',
                'Threshold Configuration'
            ];

            ctx.font = '14px Arial';
            violationFeatures.forEach((feature, index) => {
                ctx.fillText('‚Ä¢ ' + feature, 670, 290 + index * 25);
            });

            // Security flow
            ctx.fillStyle = '#16A085';
            drawRoundedRect(ctx, 50, 350, 900, 100, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Security Implementation Flow', 500, 380);
            ctx.font = '16px Arial';
            ctx.fillText('User Login ‚Üí Role Verification ‚Üí Quiz Access ‚Üí Security Activation ‚Üí Monitoring ‚Üí Violation Handling', 500, 410);

            // Connection arrows
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;

            // Layer connections
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                ctx.moveTo(150, 100 + i * 70);
                ctx.lineTo(150, 120 + i * 70);
                ctx.stroke();
                ctx.fillStyle = '#333';
                drawArrowHead(ctx, 150, 120 + i * 70, Math.PI/2);
            }

            // To features
            ctx.beginPath();
            ctx.moveTo(250, 160);
            ctx.lineTo(300, 160);
            ctx.stroke();
            drawArrowHead(ctx, 300, 160, 0);

            // To override
            ctx.beginPath();
            ctx.moveTo(600, 130);
            ctx.lineTo(650, 130);
            ctx.stroke();
            drawArrowHead(ctx, 650, 130, 0);

            // To violation management
            ctx.beginPath();
            ctx.moveTo(600, 310);
            ctx.lineTo(650, 310);
            ctx.stroke();
            drawArrowHead(ctx, 650, 310, 0);
        }

        // Function to create database schema diagram
        function createDatabaseSchemaDiagram() {
            const canvas = document.getElementById('databaseCanvas');
            const ctx = canvas.getContext('2d');

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#f0f8ff');
            gradient.addColorStop(1, '#e8f4f8');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Database collections
            const collections = [
                { name: 'Users', x: 50, y: 50, color: '#3498DB', fields: ['name', 'email', 'role', 'department', 'year'] },
                { name: 'Quizzes', x: 300, y: 50, color: '#E74C3C', fields: ['title', 'duration', 'questions', 'security', 'timing'] },
                { name: 'Submissions', x: 550, y: 50, color: '#27AE60', fields: ['quiz', 'student', 'answers', 'score', 'time'] },
                { name: 'Subjects', x: 800, y: 50, color: '#9B59B6', fields: ['name', 'code', 'department', 'semester'] },
                { name: 'Event Quizzes', x: 50, y: 250, color: '#F39C12', fields: ['title', 'registrations', 'teamSize', 'status'] },
                { name: 'Quiz Settings', x: 300, y: 250, color: '#E67E22', fields: ['adminOverride', 'violations', 'logging'] },
                { name: 'Academic Details', x: 550, y: 250, color: '#1ABC9C', fields: ['department', 'year', 'sections', 'subjects'] },
                { name: 'Departments', x: 800, y: 250, color: '#34495E', fields: ['name', 'code', 'coordinators', 'active'] }
            ];

            collections.forEach(collection => {
                // Draw collection box
                ctx.fillStyle = collection.color;
                drawRoundedRect(ctx, collection.x, collection.y, 180, 150, 10);
                ctx.fill();

                // Collection name
                ctx.fillStyle = 'white';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(collection.name, collection.x + 90, collection.y + 25);

                // Fields
                ctx.font = '12px Arial';
                ctx.textAlign = 'left';
                collection.fields.forEach((field, index) => {
                    ctx.fillText('‚Ä¢ ' + field, collection.x + 10, collection.y + 50 + index * 18);
                });
            });

            // Relationships
            ctx.strokeStyle = '#2C3E50';
            ctx.lineWidth = 2;

            // Users to Quizzes (creates)
            ctx.beginPath();
            ctx.moveTo(230, 125);
            ctx.lineTo(300, 125);
            ctx.stroke();
            ctx.fillStyle = '#2C3E50';
            drawArrowHead(ctx, 300, 125, 0);

            // Users to Submissions (submits)
            ctx.beginPath();
            ctx.moveTo(230, 100);
            ctx.lineTo(550, 100);
            ctx.stroke();
            drawArrowHead(ctx, 550, 100, 0);

            // Quizzes to Submissions (has)
            ctx.beginPath();
            ctx.moveTo(480, 125);
            ctx.lineTo(550, 125);
            ctx.stroke();
            drawArrowHead(ctx, 550, 125, 0);

            // Subjects to Quizzes (categorizes)
            ctx.beginPath();
            ctx.moveTo(800, 100);
            ctx.lineTo(480, 100);
            ctx.stroke();
            drawArrowHead(ctx, 480, 100, Math.PI);

            // Relationship labels
            ctx.fillStyle = '#2C3E50';
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('creates', 265, 115);
            ctx.fillText('submits', 390, 90);
            ctx.fillText('has', 515, 115);
            ctx.fillText('categorizes', 640, 90);

            // Database info
            ctx.fillStyle = '#2C3E50';
            drawRoundedRect(ctx, 50, 450, 900, 120, 15);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('MongoDB Database Features', 500, 480);

            const dbFeatures = [
                'Document-based Storage for Flexible Data Structures',
                'Mongoose ODM for Schema Validation and Relationships',
                'Indexing for Optimized Query Performance',
                'Data Validation at Multiple Levels',
                'Automatic Timestamps and Audit Trails'
            ];

            ctx.font = '14px Arial';
            dbFeatures.forEach((feature, index) => {
                ctx.fillText('‚Ä¢ ' + feature, 500, 510 + index * 20);
            });
        }

        // Download function
        function downloadDiagram(canvasId, filename) {
            const canvas = document.getElementById(canvasId);
            const link = document.createElement('a');
            link.download = filename + '.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // Download all diagrams
        function downloadAllDiagrams() {
            const diagrams = [
                { id: 'architectureCanvas', name: 'System-Architecture' },
                { id: 'rolesCanvas', name: 'User-Roles-Permissions' },
                { id: 'workflowCanvas', name: 'Quiz-Creation-Workflow' },
                { id: 'studentCanvas', name: 'Student-Quiz-Process' },
                { id: 'securityCanvas', name: 'Security-System' },
                { id: 'databaseCanvas', name: 'Database-Schema' }
            ];

            diagrams.forEach((diagram, index) => {
                setTimeout(() => {
                    downloadDiagram(diagram.id, diagram.name);
                }, index * 500); // Delay to avoid browser blocking
            });

            alert('All diagrams will be downloaded. Please check your downloads folder.');
        }

        // Initialize all diagrams when page loads
        window.onload = function() {
            createArchitectureDiagram();
            createUserRolesDiagram();
            createQuizWorkflowDiagram();
            createStudentProcessDiagram();
            createSecuritySystemDiagram();
            createDatabaseSchemaDiagram();
        };
    </script>
</body>
</html>
